{{ define "main" }}
<div class="container-wide page-content">

  <header>
    <h1>{{ .Title }}</h1>

    {{/* Muestra un subtítulo si existe */}}
    {{ if .Params.subtitle }}
    <p class="subtitle">{{ .Params.subtitle }}</p>
    {{ end }}

    {{/* Enlace para volver a la portada del libro, si aplica */}}
    {{ with .Parent }}
      {{ if strings.HasPrefix .RelPermalink "/libros/" }}
        <p class="parent-book-link">
          Volver a la obra: <a href="{{ .Permalink }}">{{ .Title }}</a>
        </p>
      {{ end }}
    {{ end }}
  </header>

  <div class="content-body">

    {{/* Mostrar partes 1.md a 6.md si existen como recursos */}}
    {{ if .Resources }}
      {{ range seq 1 6 }}
        {{ with $.Resources.GetMatch (printf "%d.md" .) }}
          <div class="contenedor parte-{{ .Name | plainify }}">
            {{ .Content }}
          </div>
        {{ end }}
      {{ end }}
    {{ else }}
      {{/* Si no hay recursos, mostrar contenido normal */}}
      {{ .Content }}
    {{ end }}

  </div>

  {{/* Navegación entre capítulos */}}
  {{ partial "chapter-nav.html" . }}

</div>
{{ end }}
