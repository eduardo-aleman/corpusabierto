<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "es" }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="preload" href="{{ "/css/style.css" | relURL }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{{ "/css/style.css" | relURL }}"></noscript>
    
    <style>
      /* * 1. IMPROVEMENT: Import fonts directly with `font-display: swap`.
       * This is the most effective way to handle font loading and prevent layout shifts (CLS).
       * It instructs the browser to use a fallback font and swap it once the custom font is ready.
       * This replaces the complex <link> tags for fonts.
       */
      @import url('https://fonts.googleapis.com/css2?family=Cardo:wght@400;700&display=swap');

      /* 2. IMPROVEMENT: Added CSS variables for better maintainability */
      :root {
        --primary-font: 'Cardo', serif;
        --text-color: #212529;
        --primary-color: #014c9d;
        --bg-white: #ffffff;
        --bg-light-gray: #fcfcfd;
        --border-color: #dee2e6;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body {
        background-color: var(--bg-white);
        color: var(--text-color);
        font-family: var(--primary-font);
        margin: 0;
        line-height: 1.6;
      }
      
      p {
        line-height: 1.8;
        text-align: justify;
        margin-bottom: 1.5rem;
      }

      .container-wide {
        width: 90%;
        max-width: 1600px;
        margin: 0 auto;
        padding: 0 2rem;
      }

      .site-header {
        background-color: var(--bg-white);
        border-bottom: 1px solid var(--border-color);
        padding: 1.5rem 0;
        margin-bottom: .5rem;
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .site-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--text-color);
        text-decoration: none;
      }

      .main-nav ul {
        margin: 0;
        padding: 0;
        list-style: none;
        display: flex;
        align-items: center;
        gap: .5rem;
      }

      .main-nav a {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: .75rem;
        color: var(--text-color);
        background-color: transparent;
        border-radius: 50%;
      }

      .main-nav svg {
        width: 24px;
        height: 24px;
      }

      .menu-icon {
        display: none;
        width: 30px;
        height: 24px;
        flex-direction: column;
        justify-content: space-between;
        z-index: 1001;
      }

      .menu-icon-bar {
        display: block;
        width: 100%;
        height: 4px;
        background-color: var(--text-color);
        border-radius: 2px;
      }

      .intro-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 2rem;
        margin: 4rem auto 2rem auto;
        padding: 2rem;
        background-color: var(--bg-light-gray);
        border-left: 4px solid var(--primary-color);
        border-radius: 4px;
        max-width: 1200px;
        color: var(--text-color);
        /* * 3. IMPROVEMENT: Added a min-height.
         * This reserves a minimum amount of vertical space, reducing the chance of the 
         * container resizing after content loads and shifting content below it.
         * Adjust the value based on your typical content height.
        */
        min-height: 250px;
      }

      .intro-left h2 {
        font-size: 2rem;
        font-weight: 700;
        margin-top: 0;
        display: flex;
        align-items: center;
        gap: .5rem;
      }

      @media (max-width: 800px) {
        .menu-icon {
          display: flex;
        }

        .main-nav {
          display: none;
        }

        .intro-grid {
          grid-template-columns: 1fr;
        }

        .intro-left h2 {
          font-size: 1.6rem;
        }
      }
    </style>
    
    <meta name="description" content="Proyecto de acceso libre a textos clásicos en griego o latín y español, con notas críticas y herramientas de estudio.">
    <meta name="keywords" content="Corpus Abierto, Tucídides, Historia de la Guerra del Peloponeso, griego, traducción, notas críticas, textos clásicos, literatura, historia antigua, historiografía">
    <link rel="icon" type="image/png" href="{{ "favicon-96x96.png" | absURL }}" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="{{ "favicon.svg" | absURL }}">
    <link rel="shortcut icon" href="{{ "favicon.ico" | absURL }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ "/icons/apple-touch-icon.png" | absURL }}">
    <link rel="manifest" href="{{ "site.webmanifest" | absURL }}">

    {{/* Block for additional styles from other templates if necessary */}}
    {{ block "styles" . }}{{ end }}
</head>
<body>
    
    {{ partial "header.html" . }}

    <main>
        {{/* Hugo will fill this block with content from single.html, list.html, etc. */}}
        {{ block "main" . }}{{ end }}
    </main>

    <div id="modal-container" class="modal-container">
        <div class="modal-content">
            <button id="modal-close-btn" class="modal-close-btn" title="Cerrar">&times;</button>
            <h2 id="modal-title"></h2>
            <div id="modal-body"></div>
        </div>
    </div>

    {{ partial "footer.html" . }}

    {{/* Centralized call to the partial that handles all scripts */}}
    {{ partial "scripts.html" . }}

</body>
</html>